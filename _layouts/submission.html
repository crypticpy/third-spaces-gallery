---
layout: default
---

<article class="py-8 lg:py-12 overflow-x-hidden">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Breadcrumb -->
    <nav class="mb-6" aria-label="Breadcrumb">
      <ol class="flex items-center gap-2 text-sm">
        <li>
          <a href="{{ '/' | relative_url }}" class="text-brand-stone hover:text-brand-navy transition dark:text-gray-400 dark:hover:text-white">Home</a>
        </li>
        <li class="text-brand-cloud dark:text-gray-600">/</li>
        <li>
          <a href="{{ '/designs/' | relative_url }}" class="text-brand-stone hover:text-brand-navy transition dark:text-gray-400 dark:hover:text-white">Designs</a>
        </li>
        <li class="text-brand-cloud dark:text-gray-600">/</li>
        <li class="text-brand-navy font-medium dark:text-gray-100" aria-current="page">{{ page.title }}</li>
      </ol>
    </nav>

    <!-- Main grid -->
    <div class="grid gap-8 lg:grid-cols-[1fr_380px] lg:gap-12">
      <!-- Left column: Content -->
      <div class="space-y-8 min-w-0">
        <!-- Header -->
        <header>
          <!-- Feature badges -->
          {% if page.feature_focus %}
          <div class="mb-4 flex flex-wrap gap-2">
            {% for feature in page.feature_focus %}
              {% assign feature_data = site.feature_categories | where: "id", feature | first %}
              <span class="inline-flex items-center gap-1.5 rounded-full
                           bg-brand-sky/10 px-3 py-1
                           text-xs font-semibold uppercase tracking-wide text-brand-indigo
                           dark:bg-brand-sky/20 dark:text-brand-sky">
                {{ feature_data.label | default: feature }}
              </span>
            {% endfor %}
          </div>
          {% endif %}

          <h1 class="text-3xl font-bold text-brand-navy sm:text-4xl lg:text-5xl dark:text-gray-100 break-words">
            {{ page.title }}
          </h1>

          <!-- Designer info -->
          <div class="mt-4 flex flex-wrap items-center gap-4 text-sm">
            <span class="inline-flex items-center gap-2 text-brand-stone dark:text-gray-400">
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
              Made by <strong class="text-brand-navy dark:text-white">{{ page.designer }}</strong>
            </span>
            {% if page.school %}
            <span class="inline-flex items-center gap-2 text-brand-stone dark:text-gray-400">
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
              </svg>
              {{ page.school }}
            </span>
            {% endif %}
            {% if page.grade %}
            <span class="rounded-full bg-brand-gold/20 px-3 py-1
                         text-xs font-bold uppercase tracking-wide text-brand-navy
                         dark:bg-brand-gold/30 dark:text-brand-gold">
              {{ page.grade }}
            </span>
            {% endif %}
          </div>
        </header>

        <!-- Summary -->
        {% if page.summary %}
        <p class="text-lg text-brand-stone leading-relaxed dark:text-gray-300">
          {{ page.summary }}
        </p>
        {% endif %}

        <!-- Creator Note (Designer's Voice) -->
        {% if page.creator_note %}
        <blockquote class="relative rounded-2xl border-l-4 border-brand-sky bg-brand-light-blue/30 p-6
                          dark:bg-brand-sky/10 dark:border-brand-sky/50">
          <span class="absolute -top-3 -left-2 text-4xl text-brand-sky/50" aria-hidden="true">"</span>
          <p class="text-brand-navy italic leading-relaxed dark:text-gray-200">
            {{ page.creator_note }}
          </p>
          <cite class="mt-3 block text-sm font-medium text-brand-stone not-italic dark:text-gray-400">
            â€” {{ page.designer }}
          </cite>
        </blockquote>
        {% endif %}

        <!-- Remixable Features Section -->
        {% if page.features and page.features.size > 0 %}
        <section class="rounded-2xl border-2 border-dashed border-teal-400/40 bg-teal-50/30 p-6
                        shadow-[0_0_20px_rgba(20,184,166,0.1)]
                        dark:border-teal-400/50 dark:bg-teal-950/15
                        dark:shadow-[0_0_20px_rgba(20,184,166,0.15)]" aria-label="Features to remix">
          <div class="flex items-center justify-between mb-1">
            <div class="flex items-center gap-2">
              <span class="text-2xl" aria-hidden="true">ðŸŽ¨</span>
              <h2 class="text-lg font-bold text-brand-navy dark:text-gray-100">Remix These Features</h2>
            </div>
            <a href="{{ '/remix/' | relative_url }}"
               class="text-xs font-medium text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 transition">
              View your Remix â†’
            </a>
          </div>
          <p class="text-sm text-brand-stone dark:text-gray-400 mb-3">
            Here are this design's features. Tap the ones you like to add them to your remix.
          </p>
          <details class="mb-4 text-xs text-brand-stone/70 dark:text-gray-500">
            <summary class="cursor-pointer hover:text-brand-stone dark:hover:text-gray-400 transition inline-flex items-center gap-1">
              What is Remix?
            </summary>
            <p class="mt-1 pl-0.5">
              Your Remix is like a wishlist â€” collect features from any design, then share your ideal combo.
            </p>
          </details>
          <div class="flex flex-wrap gap-2">
            {% for feature in page.features %}
            <button type="button"
                    class="tsg-chip transition-all hover:bg-teal-500/15 hover:border-teal-400"
                    data-remix-add="{{ feature.id }}"
                    data-remix-name="{{ feature.name }}"
                    data-remix-icon="{{ feature.icon | default: 'ðŸŽ¯' }}"
                    data-remix-source="{{ page.slug }}"
                    data-remix-source-title="{{ page.title }}"
                    data-remix-source-thumbnail="{{ page.cover_image | default: page.thumbnail | relative_url }}"
                    data-remix-source-designer="{{ page.designer }}"
                    data-remix-source-url="{{ page.url | relative_url }}"
                    aria-pressed="false">
              <span aria-hidden="true">{{ feature.icon | default: 'ðŸŽ¯' }}</span>
              <span class="font-medium">{{ feature.name }}</span>
              <span data-remix-label class="text-xs opacity-70">+ Add</span>
            </button>
            {% endfor %}
          </div>
        </section>
        {% endif %}

        <!-- Screen Gallery (one at a time with navigation) -->
        {% if page.screens.size > 0 or page.images.size > 0 %}
        {% assign screen_count = page.screens.size | default: page.images.size %}
        <section class="space-y-4" aria-label="Design screens">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-semibold text-brand-navy dark:text-gray-100">Design Screens</h2>
            <p class="text-sm text-brand-stone dark:text-gray-500" data-screen-counter>
              1 / {{ screen_count }}
            </p>
          </div>

          <!-- Single-image viewer with navigation -->
          <div class="relative" data-screen-viewer>
            <div class="overflow-hidden rounded-2xl border border-brand-sky/10 bg-white
                        shadow-lg dark:border-gray-700 dark:bg-gray-800">
              <div class="flex snap-x snap-mandatory overflow-x-auto scrollbar-hide"
                   tabindex="0"
                   aria-roledescription="carousel"
                   aria-label="Screen carousel"
                   data-screen-track>
                {% if page.screens.size > 0 %}
                  {% for screen in page.screens %}
                  <figure class="snap-start snap-always shrink-0 w-full">
                    <a href="{{ screen.src | relative_url }}"
                       target="_blank"
                       class="block">
                      <picture>
                        <source srcset="{{ screen.src | replace: '.png', '.webp' | replace: '.jpeg', '.webp' | relative_url }}" type="image/webp">
                        <img src="{{ screen.src | relative_url }}"
                             alt="{{ screen.alt | default: page.title | append: ' screen' }}"
                             class="w-full object-contain"
                             loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                             decoding="async">
                      </picture>
                    </a>
                    {% if screen.caption %}
                    <figcaption class="px-4 py-2 text-sm text-brand-stone dark:text-gray-400 text-center
                                       bg-white/80 dark:bg-gray-800/80">
                      {{ screen.caption }}
                    </figcaption>
                    {% endif %}
                  </figure>
                  {% endfor %}
                {% else %}
                  {% for image in page.images %}
                  <figure class="snap-start snap-always shrink-0 w-full">
                    <a href="{{ image | relative_url }}"
                       target="_blank"
                       class="block">
                      <picture>
                        <source srcset="{{ image | replace: '.png', '.webp' | replace: '.jpeg', '.webp' | relative_url }}" type="image/webp">
                        <img src="{{ image | relative_url }}"
                             alt="Screen {{ forloop.index }} from {{ page.title }}"
                             class="w-full object-contain"
                             loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                             decoding="async">
                      </picture>
                    </a>
                  </figure>
                  {% endfor %}
                {% endif %}
              </div>
            </div>

            <!-- Prev/Next arrows -->
            {% if screen_count > 1 %}
            <button type="button"
                    class="absolute left-2 top-1/2 -translate-y-1/2 z-10
                           flex items-center justify-center w-10 h-10 rounded-full
                           bg-white/80 dark:bg-gray-800/80 backdrop-blur
                           border border-brand-sky/20 dark:border-gray-600
                           text-brand-navy dark:text-white shadow-md
                           hover:bg-white dark:hover:bg-gray-700 transition
                           disabled:opacity-30 disabled:cursor-default"
                    data-screen-prev
                    disabled
                    aria-label="Previous screen">
              <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
              </svg>
            </button>
            <button type="button"
                    class="absolute right-2 top-1/2 -translate-y-1/2 z-10
                           flex items-center justify-center w-10 h-10 rounded-full
                           bg-white/80 dark:bg-gray-800/80 backdrop-blur
                           border border-brand-sky/20 dark:border-gray-600
                           text-brand-navy dark:text-white shadow-md
                           hover:bg-white dark:hover:bg-gray-700 transition
                           disabled:opacity-30 disabled:cursor-default"
                    data-screen-next
                    aria-label="Next screen">
              <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
              </svg>
            </button>
            {% endif %}
          </div>

          <!-- Dot indicators -->
          {% if screen_count > 1 %}
          <div class="flex items-center justify-center gap-2" aria-label="Screen indicators">
            {% for i in (1..screen_count) %}
            <button type="button"
                    class="flex items-center justify-center w-8 h-8 rounded-full transition-colors"
                    data-dot-index="{{ forloop.index0 }}"
                    aria-label="Go to screen {{ forloop.index }}">
              <span class="block h-2.5 w-2.5 rounded-full
                           {% if forloop.first %}bg-brand-sky{% else %}bg-brand-cloud dark:bg-gray-600{% endif %}"
                    data-dot-visual></span>
            </button>
            {% endfor %}
          </div>
          {% endif %}
        </section>
        {% endif %}

        <!-- Description/content -->
        {% if content and content != "" %}
        <div class="prose prose-brand max-w-none dark:prose-invert break-words">
          {{ content }}
        </div>
        {% endif %}

        <!-- Community Feedback Section -->
        <section class="mt-8 rounded-2xl border border-brand-sky/10 bg-white/80 p-6
                        dark:bg-gray-800/80 dark:border-gray-700"
                 data-feedback-display
                 data-submission-id="{{ page.slug }}"
                 aria-label="Community feedback">
          <div class="flex items-center gap-2 mb-4">
            <span class="text-xl" aria-hidden="true">ðŸ’¬</span>
            <h2 class="text-lg font-bold text-brand-navy dark:text-gray-100">Community Feedback</h2>
          </div>
          <div data-feedback-list class="space-y-3">
            <!-- Populated by feedback-display.js -->
          </div>
        </section>

      </div>

      <!-- Right column: Sidebar -->
      <aside class="space-y-6 lg:sticky lg:top-24 lg:self-start order-first lg:order-none">
        <!-- Thumbnail/Hero image -->
        {% if page.thumbnail or page.cover_image %}
        {% assign hero_img = page.cover_image | default: page.thumbnail %}
        <div class="overflow-hidden rounded-2xl border border-brand-sky/10 bg-white
                    shadow-[0_8px_30px_rgba(34,37,78,0.12)]
                    dark:border-gray-700 dark:bg-gray-800">
          <picture>
            <source srcset="{{ hero_img | replace: '.png', '.webp' | replace: '.jpeg', '.webp' | relative_url }}" type="image/webp">
            <img src="{{ hero_img | relative_url }}"
                 alt="{{ page.thumbnail_alt | default: page.title }}"
                 class="aspect-[16/10] w-full object-cover">
          </picture>
        </div>
        {% endif %}

        <!-- Voting panel -->
        <div class="rounded-2xl border border-brand-sky/10 bg-white p-6
                    shadow-[0_4px_20px_rgba(34,37,78,0.08)]
                    dark:border-gray-700 dark:bg-gray-800"
             data-submission-id="{{ page.slug }}">
          <h3 class="mb-4 text-lg font-semibold text-brand-navy dark:text-gray-100">Show some love</h3>

          <div class="space-y-3">
            {% include vote-button.html
               submission_id=page.slug
               category="favorite"
               count=page.votes.favorite
               size="md" %}

            {% include vote-button.html
               submission_id=page.slug
               category="innovative"
               count=page.votes.innovative
               size="md" %}

            {% include vote-button.html
               submission_id=page.slug
               category="inclusive"
               count=page.votes.inclusive
               size="md" %}
          </div>

          <!-- Feedback prompt (shown after voting) -->
          {% include feedback-prompt.html submission_id=page.slug %}
        </div>

        {% comment %}
        {% if page.features and page.features.size > 0 %}
        <!-- Remix CTA â€” commented out: remix section moved above design screens -->
        <div class="rounded-2xl border-2 border-teal-400/30 bg-teal-50/30 p-5
                    shadow-[0_0_15px_rgba(20,184,166,0.08)]
                    dark:border-teal-400/40 dark:bg-teal-950/20
                    dark:shadow-[0_0_15px_rgba(20,184,166,0.12)]">
          <h3 class="mb-2 text-lg font-semibold text-brand-navy dark:text-gray-100">
            Remix This Design
          </h3>
          <p class="text-sm text-brand-stone dark:text-gray-400 mb-3">
            Pick your favorite features and add them to your remix collection
          </p>
          <button type="button"
                  data-scroll-to-remix
                  class="inline-flex w-full items-center justify-center gap-2 rounded-xl
                         bg-teal-500 px-4 py-3 text-sm font-semibold text-white
                         shadow-lg shadow-teal-500/25 transition-all
                         hover:-translate-y-0.5 hover:bg-teal-600 hover:shadow-xl">
            <span aria-hidden="true">ðŸŽ¨</span>
            Browse Features Below
          </button>
        </div>
        {% endif %}
        {% endcomment %}

        <!-- Links -->
        {% if page.links.demo_url %}
        <div class="rounded-2xl border border-brand-sky/10 bg-white p-6
                    shadow-[0_4px_20px_rgba(34,37,78,0.08)]
                    dark:border-gray-700 dark:bg-gray-800">
          <h3 class="mb-4 text-lg font-semibold text-brand-navy dark:text-gray-100">Try it out</h3>
          <a href="{{ page.links.demo_url }}"
             target="_blank"
             rel="noopener noreferrer"
             class="inline-flex w-full items-center justify-center gap-2 rounded-xl
                    bg-brand-indigo px-4 py-3 text-sm font-semibold text-white
                    shadow-lg shadow-brand-indigo/25 transition-all
                    hover:-translate-y-0.5 hover:bg-brand-navy hover:shadow-xl
                    dark:bg-brand-sky dark:shadow-brand-sky/25 dark:hover:bg-brand-indigo">
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
            </svg>
            View Interactive Demo
          </a>
        </div>
        {% endif %}

        <!-- Share -->
        <div class="rounded-2xl border border-brand-sky/10 bg-white p-6
                    shadow-[0_4px_20px_rgba(34,37,78,0.08)]
                    dark:border-gray-700 dark:bg-gray-800"
             data-share-widget
             data-share-title="{{ page.title }}"
             data-share-designer="{{ page.designer }}"
             data-share-summary="{{ page.summary | truncate: 100 }}"
             data-share-url="{{ page.url | absolute_url }}">
          <h3 class="mb-4 text-lg font-semibold text-brand-navy dark:text-gray-100">Share this design</h3>
          <!-- Native share button â€” uses Web Share API where available, clipboard fallback everywhere else -->
          <button type="button" data-share-native
                  class="mb-3 inline-flex w-full rounded-lg bg-brand-sky px-4 py-2.5
                         text-sm font-semibold text-white transition
                         hover:bg-brand-indigo
                         dark:bg-brand-sky dark:hover:bg-brand-indigo
                         items-center justify-center gap-2">
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
            </svg>
            Share
          </button>
          <button type="button" data-share-copy
                  class="inline-flex w-full rounded-lg border border-brand-sky/20 bg-white px-4 py-2.5
                         text-sm font-medium text-brand-navy transition
                         hover:border-brand-sky hover:bg-brand-sky/5
                         dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100
                         dark:hover:border-brand-sky dark:hover:bg-brand-sky/10
                         items-center justify-center gap-1.5">
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
            </svg>
            <span>Copy link</span>
          </button>
          <p class="mt-2 text-xs text-brand-stone/60 dark:text-gray-500" data-share-hint hidden>
            Message copied â€” paste it in your post!
          </p>
        </div>
      </aside>
    </div>
  </div>
</article>

<!-- Screen carousel navigation -->
<script>
(function() {
  var track = document.querySelector('[data-screen-track]');
  if (!track) return;

  var dots = document.querySelectorAll('[data-dot-index]');
  var counter = document.querySelector('[data-screen-counter]');
  var prevBtn = document.querySelector('[data-screen-prev]');
  var nextBtn = document.querySelector('[data-screen-next]');
  var figures = track.querySelectorAll('figure');
  var total = figures.length;
  var prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // Get current active index from scroll position
  function getActiveIndex() {
    var scrollLeft = track.scrollLeft;
    var idx = 0;
    var minDist = Infinity;
    for (var i = 0; i < figures.length; i++) {
      var dist = Math.abs(figures[i].offsetLeft - scrollLeft);
      if (dist < minDist) { minDist = dist; idx = i; }
    }
    return idx;
  }

  // Scroll to specific index
  function scrollToIndex(idx) {
    var clamped = Math.max(0, Math.min(idx, total - 1));
    figures[clamped].scrollIntoView({
      behavior: prefersReducedMotion ? 'auto' : 'smooth',
      block: 'nearest',
      inline: 'start'
    });
  }

  // Update all UI: dots, counter, arrow disabled state
  function updateUI() {
    var idx = getActiveIndex();

    // Dots (update the inner visual span)
    for (var i = 0; i < dots.length; i++) {
      var visual = dots[i].querySelector('[data-dot-visual]') || dots[i];
      var isActive = i === idx;
      visual.classList.toggle('bg-brand-sky', isActive);
      visual.classList.toggle('dark:bg-brand-sky', isActive);
      visual.classList.toggle('bg-brand-cloud', !isActive);
      visual.classList.toggle('dark:bg-gray-600', !isActive);
    }

    // Counter
    if (counter) counter.textContent = (idx + 1) + ' / ' + total;

    // Arrows
    if (prevBtn) prevBtn.disabled = idx === 0;
    if (nextBtn) nextBtn.disabled = idx === total - 1;
  }

  // Arrow click handlers
  if (prevBtn) prevBtn.addEventListener('click', function() { scrollToIndex(getActiveIndex() - 1); });
  if (nextBtn) nextBtn.addEventListener('click', function() { scrollToIndex(getActiveIndex() + 1); });

  // Dot click handlers
  dots.forEach(function(dot) {
    dot.addEventListener('click', function() {
      scrollToIndex(parseInt(dot.getAttribute('data-dot-index'), 10));
    });
  });

  // Keyboard navigation
  track.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowLeft') { e.preventDefault(); scrollToIndex(getActiveIndex() - 1); }
    else if (e.key === 'ArrowRight') { e.preventDefault(); scrollToIndex(getActiveIndex() + 1); }
  });

  // Track scroll for UI updates
  var raf = 0;
  track.addEventListener('scroll', function() {
    cancelAnimationFrame(raf);
    raf = requestAnimationFrame(updateUI);
  }, { passive: true });

  // Initial state
  updateUI();
})();

// Scroll-to-remix CTA (delegated to avoid inline onclick)
document.addEventListener('click', function(e) {
  if (e.target.closest('[data-scroll-to-remix]')) {
    var target = document.querySelector('[aria-label="Features to remix"]');
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }
});

// â”€â”€ Share widget â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
  var widget = document.querySelector('[data-share-widget]');
  if (!widget) return;

  var title    = widget.dataset.shareTitle || '';
  var designer = widget.dataset.shareDesigner || '';
  var pageUrl  = widget.dataset.shareUrl || window.location.href;

  // Short blurb for clipboard copy (under 200 chars)
  var shortBlurb = title + ' by ' + designer +
    ' â€” a student-designed feature for the Third Spaces app. Check it out!\n' + pageUrl;

  // Native share payload (Web Share API)
  var sharePayload = {
    title: title,
    text: title + ' by ' + designer + ' â€” a student-designed feature for the Third Spaces app.',
    url: pageUrl
  };

  /** Flash a hint message below the share buttons */
  function showHint(msg) {
    var hint = widget.querySelector('[data-share-hint]');
    if (!hint) return;
    hint.textContent = msg;
    hint.hidden = false;
    clearTimeout(hint._timer);
    hint._timer = setTimeout(function() { hint.hidden = true; }, 3000);
  }

  /** Copy text to clipboard and show feedback */
  function copyAndFeedback(text, btn, originalLabel, hintMsg) {
    // Feature-detect clipboard API (not available in non-secure contexts or older browsers)
    if (!navigator.clipboard || !navigator.clipboard.writeText) {
      showHint('Copy not supported in this browser.');
      return;
    }

    navigator.clipboard.writeText(text).then(function() {
      var label = btn.querySelector('span:last-child') || btn;
      if (label.tagName) {
        var orig = label.textContent;
        label.textContent = 'Copied!';
        setTimeout(function() { label.textContent = originalLabel || orig; }, 2000);
      }
      if (hintMsg) showHint(hintMsg);
    }).catch(function() {
      showHint('Could not copy â€” try manually.');
    });
  }

  // Native share button â€” Web Share API where available, clipboard fallback otherwise
  var nativeBtn = widget.querySelector('[data-share-native]');
  if (nativeBtn) {
    nativeBtn.addEventListener('click', function() {
      if (navigator.share) {
        navigator.share(sharePayload).catch(function(err) {
          if (err.name !== 'AbortError') {
            copyAndFeedback(shortBlurb, nativeBtn, 'Share', 'Copied! Ready to paste.');
          }
        });
      } else {
        copyAndFeedback(shortBlurb, nativeBtn, 'Share', 'Copied! Ready to paste.');
      }
    });
  }

  // Copy link (copies blurb + URL)
  var copyBtn = widget.querySelector('[data-share-copy]');
  if (copyBtn) {
    copyBtn.addEventListener('click', function() {
      copyAndFeedback(shortBlurb, copyBtn, 'Copy link', 'Copied! Ready to paste.');
    });
  }
})();
</script>
