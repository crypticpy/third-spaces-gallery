{% comment %}
  Feedback Prompt Component
  Collects moderated feedback/comments from visitors
  Usage: {% include feedback-prompt.html submission_id="slug" %}
{% endcomment %}

<div class="feedback-prompt mt-4 rounded-xl border border-brand-sky/10 dark:border-gray-600 bg-surface-lightBlue/30 dark:bg-gray-800/80 p-4"
     data-feedback-prompt
     data-submission-id="{{ include.submission_id }}">

  <form data-feedback-form data-submission-id="{{ include.submission_id }}">
    <p class="text-sm font-medium text-brand-navy dark:text-gray-100">
      What do you think? <span class="text-brand-stone dark:text-gray-400">(optional)</span>
    </p>

    <!-- Quick tags -->
    <div class="mt-3 flex flex-wrap gap-2">
      <button type="button"
              class="rounded-full border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-1.5
                     text-xs font-medium text-brand-navy dark:text-gray-100 transition
                     hover:border-brand-sky hover:bg-brand-sky/10 dark:hover:bg-brand-sky/20
                     [&.is-selected]:bg-brand-sky [&.is-selected]:text-white [&.is-selected]:border-brand-sky"
              data-feedback-tag="easy-to-use"
              aria-pressed="false">
        Easy to use
      </button>
      <button type="button"
              class="rounded-full border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-1.5
                     text-xs font-medium text-brand-navy dark:text-gray-100 transition
                     hover:border-brand-sky hover:bg-brand-sky/10 dark:hover:bg-brand-sky/20
                     [&.is-selected]:bg-brand-sky [&.is-selected]:text-white [&.is-selected]:border-brand-sky"
              data-feedback-tag="looks-great"
              aria-pressed="false">
        Looks great
      </button>
      <button type="button"
              class="rounded-full border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-1.5
                     text-xs font-medium text-brand-navy dark:text-gray-100 transition
                     hover:border-brand-sky hover:bg-brand-sky/10 dark:hover:bg-brand-sky/20
                     [&.is-selected]:bg-brand-sky [&.is-selected]:text-white [&.is-selected]:border-brand-sky"
              data-feedback-tag="solves-problem"
              aria-pressed="false">
        Solves a problem
      </button>
      <button type="button"
              class="rounded-full border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-1.5
                     text-xs font-medium text-brand-navy dark:text-gray-100 transition
                     hover:border-brand-sky hover:bg-brand-sky/10 dark:hover:bg-brand-sky/20
                     [&.is-selected]:bg-brand-sky [&.is-selected]:text-white [&.is-selected]:border-brand-sky"
              data-feedback-tag="would-share"
              aria-pressed="false">
        Would share it
      </button>
    </div>

    <!-- Name input (optional) -->
    <div class="mt-3">
      <input type="text"
             class="w-full rounded-lg border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-2
                    text-sm text-brand-navy dark:text-gray-100 placeholder:text-brand-stone dark:placeholder:text-gray-400
                    focus:border-brand-sky focus:outline-none focus:ring-2 focus:ring-brand-sky/20"
             placeholder="Your name (optional)"
             maxlength="50"
             aria-label="Your name"
             data-feedback-name>
    </div>

    <!-- Text input -->
    <div class="mt-2">
      <textarea
        class="w-full rounded-lg border border-brand-sky/20 dark:border-gray-500 bg-white dark:bg-gray-700 px-3 py-2
               text-sm text-brand-navy dark:text-gray-100 placeholder:text-brand-stone dark:placeholder:text-gray-400
               focus:border-brand-sky focus:outline-none focus:ring-2 focus:ring-brand-sky/20
               resize-none"
        rows="2"
        maxlength="500"
        placeholder="I like how it..."
        aria-label="Your feedback"
        data-feedback-text></textarea>
    </div>

    <!-- Honeypot (hidden) -->
    <div class="hidden" aria-hidden="true">
      <input type="text" data-feedback-honeypot tabindex="-1" autocomplete="off">
    </div>

    <!-- Submit -->
    <div class="mt-3 flex justify-end">
      <button type="submit"
              class="rounded-full bg-brand-sky px-4 py-2 text-sm font-semibold text-white
                     transition hover:bg-brand-indigo">
        Share Feedback
      </button>
    </div>
  </form>
</div>
