{% comment %}
  Submission Card Component
  Usage: {% include submission-card.html submission=submission %}
{% endcomment %}

<article class="submission-card group relative overflow-hidden rounded-2xl
                bg-white border border-brand-sky/10
                shadow-[0_4px_20px_rgba(34,37,78,0.08)]
                transition-all duration-300
                hover:-translate-y-1
                hover:shadow-[0_12px_32px_rgba(34,37,78,0.12)]
                hover:border-brand-sky/20"
         data-submission-id="{{ include.submission.slug }}"
         data-submission-features="{{ include.submission.feature_focus | join: ',' }}"
         data-submission-votes-favorite="{{ include.submission.votes.favorite | default: 0 }}"
         data-submission-votes-innovative="{{ include.submission.votes.innovative | default: 0 }}"
         data-submission-votes-inclusive="{{ include.submission.votes.inclusive | default: 0 }}"
         data-submission-date="{{ include.submission.created_at }}">

  <!-- Image -->
  <a href="{{ include.submission.url | relative_url }}"
     class="block relative aspect-[16/10] overflow-hidden">
    {% if include.submission.thumbnail %}
    <img class="h-full w-full object-cover transition-transform duration-500
                group-hover:scale-105"
         src="{{ include.submission.thumbnail | relative_url }}"
         alt="{{ include.submission.thumbnail_alt | default: include.submission.title }}"
         loading="lazy"
         decoding="async">
    {% else %}
    <div class="h-full w-full bg-gradient-to-br from-brand-sky/20 to-brand-indigo/20
                flex items-center justify-center">
      <svg class="h-16 w-16 text-brand-sky/40" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
      </svg>
    </div>
    {% endif %}
    <div class="absolute inset-0 bg-gradient-to-t from-brand-navy/70 via-brand-navy/20 to-transparent"></div>

    <!-- Designer badge -->
    <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
      <span class="inline-flex items-center gap-1.5 rounded-full
                   bg-white/90 backdrop-blur-sm px-3 py-1
                   text-xs font-medium text-brand-navy
                   shadow-sm">
        Made by {{ include.submission.designer }}
      </span>
      {% if include.submission.grade %}
      <span class="rounded-full bg-brand-gold/90 px-2 py-0.5
                   text-[10px] font-bold uppercase tracking-wide text-brand-navy
                   shadow-sm">
        {{ include.submission.grade | split: ' ' | first }}
      </span>
      {% endif %}
    </div>
  </a>

  <!-- Content -->
  <div class="p-5">
    <a href="{{ include.submission.url | relative_url }}" class="block">
      <h3 class="text-lg font-semibold text-brand-navy line-clamp-2
                 group-hover:text-brand-indigo transition-colors">
        {{ include.submission.title }}
      </h3>
      {% if include.submission.summary %}
      <p class="mt-2 text-sm text-brand-stone line-clamp-2">
        {{ include.submission.summary }}
      </p>
      {% endif %}
    </a>

    <!-- Feature badges -->
    {% if include.submission.feature_focus %}
    <div class="mt-3 flex flex-wrap gap-1.5">
      {% for feature in include.submission.feature_focus limit:3 %}
        {% assign feature_data = site.feature_categories | where: "id", feature | first %}
        <span class="inline-flex items-center gap-1 rounded-full
                     bg-brand-sky/10 px-2 py-0.5
                     text-[10px] font-semibold uppercase tracking-wide text-brand-indigo">
          {{ feature_data.label | default: feature }}
        </span>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Compact vote buttons -->
    <div class="mt-4 grid grid-cols-3 gap-2">
      <!-- Favorite -->
      <button type="button"
              class="vote-btn-compact flex flex-col items-center gap-1
                     rounded-lg border border-brand-sky/10 bg-brand-sky/5
                     py-2 text-xs font-medium text-brand-navy
                     transition-all duration-200
                     hover:border-vote-favorite/30 hover:bg-vote-favorite/10
                     aria-pressed:bg-vote-favorite/20 aria-pressed:border-vote-favorite/40"
              data-vote-btn
              data-vote-category="favorite"
              aria-pressed="false"
              title="I'd use this">
        <span class="text-base transition-transform duration-200 group-hover:scale-110" data-vote-emoji>ğŸ’–</span>
        <span class="font-bold tabular-nums" data-vote-count>{{ include.submission.votes.favorite | default: 0 }}</span>
      </button>

      <!-- Innovative -->
      <button type="button"
              class="vote-btn-compact flex flex-col items-center gap-1
                     rounded-lg border border-brand-sky/10 bg-brand-sky/5
                     py-2 text-xs font-medium text-brand-navy
                     transition-all duration-200
                     hover:border-brand-gold/30 hover:bg-brand-gold/10
                     aria-pressed:bg-brand-gold/20 aria-pressed:border-brand-gold/40"
              data-vote-btn
              data-vote-category="innovative"
              aria-pressed="false"
              title="Super creative">
        <span class="text-base transition-transform duration-200 group-hover:scale-110" data-vote-emoji>âœ¨</span>
        <span class="font-bold tabular-nums" data-vote-count>{{ include.submission.votes.innovative | default: 0 }}</span>
      </button>

      <!-- Inclusive -->
      <button type="button"
              class="vote-btn-compact flex flex-col items-center gap-1
                     rounded-lg border border-brand-sky/10 bg-brand-sky/5
                     py-2 text-xs font-medium text-brand-navy
                     transition-all duration-200
                     hover:border-brand-sea/30 hover:bg-brand-sea/10
                     aria-pressed:bg-brand-sea/20 aria-pressed:border-brand-sea/40"
              data-vote-btn
              data-vote-category="inclusive"
              aria-pressed="false"
              title="Works for everyone">
        <span class="text-base transition-transform duration-200 group-hover:scale-110" data-vote-emoji>ğŸŒ</span>
        <span class="font-bold tabular-nums" data-vote-count>{{ include.submission.votes.inclusive | default: 0 }}</span>
      </button>
    </div>
  </div>
</article>
