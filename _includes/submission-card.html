{% comment %}
  Submission Card Component - Playful Youth-Friendly Design
  Usage: {% include submission-card.html submission=submission %}
{% endcomment %}

<article class="submission-card group relative overflow-hidden rounded-3xl
                bg-white border-2 border-brand-sky/10
                shadow-lg shadow-brand-indigo/5
                transition-all duration-300 ease-out
                hover:-translate-y-2 hover:rotate-[0.5deg]
                hover:shadow-xl hover:shadow-brand-sky/15
                hover:border-brand-sky/30"
         data-submission-id="{{ include.submission.slug }}"
         data-submission-features="{{ include.submission.feature_focus | join: ',' }}"
         data-submission-votes-favorite="{{ include.submission.votes.favorite | default: 0 }}"
         data-submission-votes-innovative="{{ include.submission.votes.innovative | default: 0 }}"
         data-submission-votes-inclusive="{{ include.submission.votes.inclusive | default: 0 }}"
         data-submission-date="{{ include.submission.created_at }}">

  <!-- Image -->
  <a href="{{ include.submission.url | relative_url }}"
     class="block relative aspect-[16/10] overflow-hidden">
    {% if include.submission.thumbnail %}
    <img class="h-full w-full object-cover transition-transform duration-500
                group-hover:scale-105"
         src="{{ include.submission.thumbnail | relative_url }}"
         alt="{{ include.submission.thumbnail_alt | default: include.submission.title }}"
         loading="lazy"
         decoding="async">
    {% else %}
    <div class="h-full w-full bg-gradient-to-br from-brand-sky/20 to-brand-indigo/20
                flex items-center justify-center">
      <svg class="h-16 w-16 text-brand-sky/40" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
      </svg>
    </div>
    {% endif %}
    <div class="absolute inset-0 bg-gradient-to-t from-brand-navy/70 via-brand-navy/20 to-transparent"></div>

    <!-- Designer badge -->
    <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
      <span class="inline-flex items-center gap-1.5 rounded-full
                   bg-white/90 backdrop-blur-sm px-3 py-1
                   text-xs font-medium text-brand-navy
                   shadow-sm">
        Made by {{ include.submission.designer }}
      </span>
      {% if include.submission.grade %}
      <span class="rounded-full bg-brand-gold/90 px-2 py-0.5
                   text-[10px] font-bold uppercase tracking-wide text-brand-navy
                   shadow-sm">
        {{ include.submission.grade | split: ' ' | first }}
      </span>
      {% endif %}
    </div>
  </a>

  <!-- Content -->
  <div class="p-5">
    <a href="{{ include.submission.url | relative_url }}" class="block">
      <h3 class="text-lg font-semibold text-brand-navy line-clamp-2
                 group-hover:text-brand-indigo transition-colors">
        {{ include.submission.title }}
      </h3>
      {% if include.submission.summary %}
      <p class="mt-2 text-sm text-brand-stone line-clamp-2">
        {{ include.submission.summary }}
      </p>
      {% endif %}
    </a>

    <!-- Feature badges -->
    {% if include.submission.feature_focus %}
    <div class="mt-3 flex flex-wrap gap-1.5">
      {% for feature in include.submission.feature_focus limit:3 %}
        {% assign feature_data = site.feature_categories | where: "id", feature | first %}
        <span class="inline-flex items-center gap-1 rounded-full
                     bg-brand-sky/10 px-2 py-0.5
                     text-[10px] font-semibold uppercase tracking-wide text-brand-indigo">
          {{ feature_data.label | default: feature }}
        </span>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Playful vote buttons -->
    <div class="mt-5 grid grid-cols-3 gap-3">
      <!-- Favorite -->
      <button type="button"
              class="vote-btn-compact group/btn flex flex-col items-center gap-1.5
                     rounded-2xl border-2 border-vote-favorite/20 bg-vote-favorite/5
                     py-3 text-xs font-bold text-brand-navy
                     transition-all duration-300 ease-out
                     hover:border-vote-favorite/50 hover:bg-vote-favorite/15 hover:scale-105
                     active:scale-95"
              data-vote-btn
              data-vote-category="favorite"
              aria-pressed="false"
              title="I'd use this!">
        <span class="text-xl transition-transform duration-300 group-hover/btn:scale-125 group-hover/btn:animate-wiggle" data-vote-emoji>ğŸ’–</span>
        <span class="font-extrabold tabular-nums text-vote-favorite" data-vote-count>{{ include.submission.votes.favorite | default: 0 }}</span>
      </button>

      <!-- Innovative -->
      <button type="button"
              class="vote-btn-compact group/btn flex flex-col items-center gap-1.5
                     rounded-2xl border-2 border-brand-gold/20 bg-brand-gold/5
                     py-3 text-xs font-bold text-brand-navy
                     transition-all duration-300 ease-out
                     hover:border-brand-gold/50 hover:bg-brand-gold/15 hover:scale-105
                     active:scale-95"
              data-vote-btn
              data-vote-category="innovative"
              aria-pressed="false"
              title="Super creative!">
        <span class="text-xl transition-transform duration-300 group-hover/btn:scale-125 group-hover/btn:animate-sparkle" data-vote-emoji>âœ¨</span>
        <span class="font-extrabold tabular-nums text-brand-orange" data-vote-count>{{ include.submission.votes.innovative | default: 0 }}</span>
      </button>

      <!-- Inclusive -->
      <button type="button"
              class="vote-btn-compact group/btn flex flex-col items-center gap-1.5
                     rounded-2xl border-2 border-brand-sea/20 bg-brand-sea/5
                     py-3 text-xs font-bold text-brand-navy
                     transition-all duration-300 ease-out
                     hover:border-brand-sea/50 hover:bg-brand-sea/15 hover:scale-105
                     active:scale-95"
              data-vote-btn
              data-vote-category="inclusive"
              aria-pressed="false"
              title="Works for everyone!">
        <span class="text-xl transition-transform duration-300 group-hover/btn:scale-125 group-hover/btn:animate-bounce" data-vote-emoji>ğŸŒ</span>
        <span class="font-extrabold tabular-nums text-brand-sea" data-vote-count>{{ include.submission.votes.inclusive | default: 0 }}</span>
      </button>
    </div>
  </div>
</article>
