---
layout: default
title: My Remix
description: Build your dream app by collecting features from youth designs
---

<div class="py-8 lg:py-12">
  <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <header class="mb-8 text-center">
      <div class="mb-4 inline-flex h-16 w-16 items-center justify-center rounded-2xl
                  bg-gradient-to-br from-brand-purple via-brand-indigo to-brand-sky
                  text-3xl shadow-lg">
        ğŸ¨
      </div>
      <h1 class="text-3xl font-bold text-brand-navy dark:text-gray-100 sm:text-4xl">
        Your Remix
      </h1>
      <p class="mt-2 text-lg text-brand-stone dark:text-gray-400">
        Features you've collected from youth designs
      </p>
      <p class="mt-1 text-sm text-brand-stone dark:text-gray-500">
        <span data-remix-total>0</span> feature(s) in your collection
      </p>
    </header>

    <!-- Empty State -->
    <div class="text-center py-12 hidden" data-remix-empty>
      <div class="mb-4 text-6xl">ğŸ”</div>
      <h2 class="text-xl font-semibold text-brand-navy dark:text-gray-100">
        No features yet
      </h2>
      <p class="mt-2 text-brand-stone dark:text-gray-400 max-w-md mx-auto">
        Browse the gallery and tap "Add to Remix" on features you like.
        Build your dream app from the best ideas!
      </p>
      <a href="{{ '/designs/' | relative_url }}"
         class="mt-6 inline-flex items-center gap-2 rounded-full
                bg-brand-indigo px-6 py-3 text-sm font-semibold text-white
                shadow-lg shadow-brand-indigo/25 transition-all
                hover:-translate-y-0.5 hover:bg-brand-navy hover:shadow-xl
                dark:bg-brand-sky dark:shadow-brand-sky/25">
        <span aria-hidden="true">ğŸ‘€</span>
        Browse Designs
      </a>
    </div>

    <!-- Feature List -->
    <div class="space-y-3" data-remix-list>
      <!-- Items populated by remix.js -->
    </div>

    <!-- Actions -->
    <div class="mt-8 flex flex-wrap items-center justify-center gap-3 hidden" data-remix-submit>
      <!-- Visualize Button -->
      <button type="button"
              class="tsg-chip hover:bg-brand-purple/10"
              data-remix-visualize>
        <span aria-hidden="true">ğŸ–¼ï¸</span>
        <span>Visualize</span>
      </button>

      <!-- Submit Button -->
      <button type="button"
              class="inline-flex items-center gap-2 rounded-full
                     bg-gradient-to-r from-brand-sea to-brand-indigo
                     px-6 py-3 text-sm font-semibold text-white
                     shadow-lg shadow-brand-sea/25 transition-all
                     hover:-translate-y-0.5 hover:shadow-xl
                     focus:outline-none focus:ring-4 focus:ring-brand-sea/50"
              data-remix-submit-btn>
        <span aria-hidden="true">ğŸš€</span>
        <span>Submit My Remix</span>
      </button>

      <!-- Clear Button -->
      <button type="button"
              class="tsg-chip hover:bg-red-50 hover:text-red-600
                     dark:hover:bg-red-900/30 dark:hover:text-red-400"
              data-remix-clear>
        <span aria-hidden="true">ğŸ—‘ï¸</span>
        <span>Clear All</span>
      </button>
    </div>

    <!-- Submission Modal -->
    <div class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm"
         data-remix-modal>
      <div class="mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl
                  dark:bg-gray-800">
        <h3 class="text-lg font-semibold text-brand-navy dark:text-gray-100">
          Share Your Remix
        </h3>
        <p class="mt-2 text-sm text-brand-stone dark:text-gray-400">
          Add a note about your remix idea (optional)
        </p>

        <textarea class="mt-4 w-full rounded-xl border border-brand-sky/20 bg-white p-3
                         text-sm text-brand-navy placeholder-brand-stone/50
                         focus:border-brand-sky focus:outline-none focus:ring-2 focus:ring-brand-sky/20
                         dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100
                         dark:placeholder-gray-500"
                  rows="3"
                  placeholder="Tell us about your app idea..."
                  data-remix-note></textarea>

        <div class="mt-4 flex justify-end gap-2">
          <button type="button"
                  class="tsg-chip"
                  data-remix-modal-close>
            Cancel
          </button>
          <button type="button"
                  class="rounded-full bg-brand-sea px-4 py-2 text-sm font-semibold text-white
                         transition-all hover:bg-brand-indigo"
                  data-remix-modal-submit>
            Submit
          </button>
        </div>
      </div>
    </div>

    <!-- Visualization Modal -->
    <div class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm"
         data-remix-viz-modal>
      <div class="mx-4 w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl
                  dark:bg-gray-800">
        <h3 class="text-lg font-semibold text-brand-navy dark:text-gray-100 text-center">
          Your Remix Visualization
        </h3>

        <!-- Icon Collage -->
        <div class="mt-6 flex flex-wrap items-center justify-center gap-4 text-4xl"
             data-remix-viz-icons>
          <!-- Icons inserted by JS -->
        </div>

        <p class="mt-6 text-center text-sm text-brand-stone dark:text-gray-400">
          A snapshot of the features in your remix
        </p>

        <div class="mt-4 flex justify-center">
          <button type="button"
                  class="tsg-chip"
                  data-remix-viz-close>
            <span aria-hidden="true">âœ•</span>
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Success Toast -->
    <div class="fixed bottom-24 left-1/2 -translate-x-1/2 z-50 hidden
                rounded-full bg-brand-sea px-6 py-3 text-sm font-semibold text-white shadow-xl"
         data-remix-toast>
      Remix submitted! Thanks for sharing your ideas.
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.querySelector('[data-remix-modal]');
  const vizModal = document.querySelector('[data-remix-viz-modal]');
  const toast = document.querySelector('[data-remix-toast]');
  const noteInput = document.querySelector('[data-remix-note]');
  const vizIcons = document.querySelector('[data-remix-viz-icons]');

  // Open submit modal
  document.querySelector('[data-remix-submit-btn]')?.addEventListener('click', () => {
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    noteInput?.focus();
  });

  // Close submit modal
  document.querySelector('[data-remix-modal-close]')?.addEventListener('click', () => {
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  });

  // Submit remix
  document.querySelector('[data-remix-modal-submit]')?.addEventListener('click', async () => {
    const note = noteInput?.value?.trim() || '';

    if (window.TSGRemix) {
      const payload = await window.TSGRemix.submit(note);
      console.log('[Remix Dashboard] Submitted:', payload);
    }

    // Close modal and show toast
    modal.classList.add('hidden');
    modal.classList.remove('flex');

    toast.classList.remove('hidden');
    setTimeout(() => {
      toast.classList.add('hidden');
    }, 3000);

    // Clear form
    if (noteInput) noteInput.value = '';
  });

  // Close modal on backdrop click
  modal?.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }
  });

  // Visualize
  document.querySelector('[data-remix-visualize]')?.addEventListener('click', () => {
    if (!window.TSGRemix) return;

    const items = window.TSGRemix.getAll();
    if (!items.length) return;

    // Build icon collage
    vizIcons.innerHTML = items.map(item =>
      `<span class="p-3 rounded-xl bg-brand-light-blue/50 dark:bg-gray-700" title="${escapeHtml(item.name)}">${escapeHtml(item.icon)}</span>`
    ).join('');

    vizModal.classList.remove('hidden');
    vizModal.classList.add('flex');
  });

  // Close viz modal
  document.querySelector('[data-remix-viz-close]')?.addEventListener('click', () => {
    vizModal.classList.add('hidden');
    vizModal.classList.remove('flex');
  });

  vizModal?.addEventListener('click', (e) => {
    if (e.target === vizModal) {
      vizModal.classList.add('hidden');
      vizModal.classList.remove('flex');
    }
  });

  // Escape key closes modals
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      modal?.classList.add('hidden');
      modal?.classList.remove('flex');
      vizModal?.classList.add('hidden');
      vizModal?.classList.remove('flex');
    }
  });

  function escapeHtml(str) {
    if (!str) return '';
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  // Update empty state visibility
  const updateEmptyState = () => {
    const empty = document.querySelector('[data-remix-empty]');
    const submit = document.querySelector('[data-remix-submit]');
    const count = window.TSGRemix?.count() || 0;

    if (empty) empty.classList.toggle('hidden', count > 0);
    if (submit) submit.classList.toggle('hidden', count === 0);
  };

  // Initial update
  setTimeout(updateEmptyState, 100);

  // Listen for cart changes (observe the list container)
  const listContainer = document.querySelector('[data-remix-list]');
  if (listContainer) {
    const observer = new MutationObserver(updateEmptyState);
    observer.observe(listContainer, { childList: true });
  }
});
</script>
